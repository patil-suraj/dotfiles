##########  sensible-default tmux.conf  #######################################
# 0. Version guard ────────────────────────────────────────────────────────────
#    Many niceties (e.g. `set-clipboard on`) require tmux ≥ 3.2.  If the
#    server you SSH into is older, nothing here will break—clipboard syncing
#    will simply fall back to the manual binding in §5b.
###############################################################################

##### 1. Prefix  ##############################################################
set -g prefix C-a                 # ⌃-a instead of ⌃-b
unbind C-b
bind C-a send-prefix              # allow ⌃-a ⌃-a to send a literal ⌃-a

##### 2. Pane navigation & splitting (Vim-style) ##############################
# instant pane moves without the prefix
bind -n C-h select-pane -L
bind -n C-j select-pane -D
bind -n C-k select-pane -U
bind -n C-l select-pane -R
bind -n C-\ select-pane -l       # swap to last-active pane

# fast splits
bind |  split-window -h          # ⌃-a |  → vertical split
bind -  split-window -v          # ⌃-a -  → horizontal split
bind r  source-file ~/.tmux.conf \; display "⟳ reloaded ~/.tmux.conf"

##### 3. Mouse & large scroll-back ###########################################
set -g mouse on                  # wheel scrolls, drag-resize panes, etc.
set -g history-limit 100000      # 100k lines of scroll-back

##### 4. Copy-mode defaults ###################################################
setw -g mode-keys vi             # h/j/k/l motions, v/V for visual
# Optional: make escape leave copy-mode instantly
bind -T copy-mode-vi Escape send -X cancel

##### 5. Clipboard integration  ##############################################
# a) Preferred method (tmux ≥ 3.2): automatic OSC 52 → host clipboard
set-option -g set-clipboard on

# b) Fallback for older tmux / servers without OSC 52:
#    y in copy-mode pipes the selection to pbcopy (mac) or xclip (Linux).
bind-key -T copy-mode-vi y \
  send -X copy-pipe-and-cancel " command -v pbcopy >/dev/null && pbcopy || xclip -selection clipboard -in"

##### 6. Status-line: clean, informative ######################################
set -g status-bg colour236
set -g status-fg colour250
set -g status-left-length 30
set -g status-left  "#[bold]#S "          # session name
set -g status-right-length 90
set -g status-right "#[fg=colour244]%Y-%m-%d #[fg=colour245]%H:%M #[fg=colour39]#(whoami)@#H"

##### 7. Quality-of-life extras ##############################################
set -g automatic-rename on       # window titles follow the running program
set -g pane-border-format " #P " # show pane numbers in the border
set -g pane-border-status top

##### 8. Miscellaneous settings ###############################################
set-g default-terminal "$TERM" # 256 colors

###############################################################################
# End of file
###############################################################################

